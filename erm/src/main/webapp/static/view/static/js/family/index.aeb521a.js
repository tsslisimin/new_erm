webpackJsonp([3],{147:function(t,e){},153:function(t,e,a){function r(t){n||a(394)}var n=!1,i=a(0)(a(221),a(619),r,"data-v-7d391d16",null);i.options.__file="/Users/legend/IdeaProjects/erm/前端/erm-ui/src/js/conf/family/app.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] app.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},221:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(466),n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={name:"app",data:function(){return{}},components:{Family:n.default},methods:{},mounted:function(){}}},222:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(1),n=function(t){return t&&t.__esModule?t:{default:t}}(r),i=a(2),o=a(53),s=a(4);e.default={name:"family",data:function(){return{formStu:{name:"",idcard:"",grade:"",clazz:"",isPoor:""},ruleStu:{name:[{required:!0,message:"请选择学生姓名",trigger:"change"}],idcard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",min:18,message:"身份证号不能少于18位",trigger:"blur"}]},formDatas:[],schId:"",gradeData:[],clazzData:[],nameData:[],isPoorData:[]}},components:{},methods:{submit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a={schoolId:e.schId,idcard:e.formStu.idcard,name:e.formStu.name,grade:e.formStu.grade,clazz:e.formStu.clazz,stuValues:[]};(0,s.forEach)(e.formDatas,function(t){t.ermFieldEntity.value&&a.stuValues.push({fieldId:t.fieldId,fieldValVal:1==t.ermFieldEntity.type||2==t.ermFieldEntity.type?t.ermFieldEntity.value:"",fieldValKey:3==t.ermFieldEntity.type?t.ermFieldEntity.value:"",fieldValKeyList:4==t.ermFieldEntity.type?t.ermFieldEntity.value:[]})}),n.default.post(i.api.h5.save,a,function(t){e.$Message.success("信息提交成功！")},function(t){e.$Message.info(t.data.msg)})}else e.$Message.error("表单验证失败！")})},getForm:function(){var t=this;n.default.get(i.api.h5.querySchField,{schId:this.schId},function(e){var a=e.data.page;t.formDatas=a})},getGrade:function(){var t=this;n.default.get(i.api.student.studentsByParam,{schoolId:this.schId},function(e){var a=e.data,r=[];a.grades.forEach(function(t){t.grade&&r.push(t.grade)}),t.gradeData=(0,s.uniq)(r)})},getClazz:function(){var t=this;this.nameData=[],this.formStu.name="",this.clazzData=[],this.formStu.clazz="",this.formStu.idcard="",n.default.get(i.api.student.studentsByParam,{schoolId:this.schId,grade:this.formStu.grade},function(e){var a=e.data,r=[];a.grades.forEach(function(t){t.clazz&&r.push(t.clazz)}),t.clazzData=(0,s.uniq)(r)})},getName:function(){var t=this;this.nameData=[],this.formStu.name="",this.formStu.idcard="",n.default.get(i.api.student.studentsByParam,{schoolId:this.schId,grade:this.formStu.grade,clazz:this.formStu.clazz},function(e){var a=e.data,r=[];a.grades.forEach(function(t){t.name&&r.push(t.name)}),t.nameData=(0,s.uniq)(r)})},getCard:function(){var t=this;n.default.get(i.api.student.studentsByParam,{schoolId:this.schId,grade:this.formStu.grade,clazz:this.formStu.clazz,name:this.formStu.name},function(e){var a=e.data;t.formStu.idcard=a.grades[0].idcard})},getSubList:function(){var t=this;n.default.get(i.api.dict.list,function(e){var a=e.data.dict;t.isPoorData=a[8]})}},watch:{"formStu.grade":function(t){t&&this.getClazz()},"formStu.clazz":function(t){t&&this.getName()},"formStu.name":function(t){t&&this.getCard()}},mounted:function(){this.schId=o.URL.getVal("schId"),this.getGrade(),this.getForm(),this.getSubList()}}},300:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var n=a(9),i=r(n),o=a(153),s=r(o);a(147),new i.default({el:"#app",render:function(t){return t(s.default)},mounted:function(){console.log("success")}})},362:function(t,e){},394:function(t,e){},4:function(t,e){t.exports=_},466:function(t,e,a){function r(t){n||a(362)}var n=!1,i=a(0)(a(222),a(587),r,"data-v-574949ff",null);i.options.__file="/Users/legend/IdeaProjects/erm/前端/erm-ui/src/js/conf/family/family.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] family.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},5:function(t,e){t.exports=$},53:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={getVal:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return a?decodeURIComponent(a[2]):null}};e.URL=r},587:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"family"},[a("Card",{attrs:{padding:10,shadow:!1,"dis-hover":!1,bordered:!1}},[a("h3",[t._v("家庭经济情况调查表")]),t._v(" "),a("Form",{ref:"formStu",attrs:{model:t.formStu,"label-width":150,rules:t.ruleStu}},[a("FormItem",{attrs:{label:"年级：",prop:"grade"}},[a("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:t.formStu.grade,callback:function(e){t.$set(t.formStu,"grade",e)},expression:"formStu.grade"}},t._l(t.gradeData,function(e,r){return a("Option",{key:r,attrs:{value:e}},[t._v(t._s(e))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"班级：",prop:"clazz"}},[a("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:t.formStu.clazz,callback:function(e){t.$set(t.formStu,"clazz",e)},expression:"formStu.clazz"}},t._l(t.clazzData,function(e,r){return a("Option",{key:r,attrs:{value:e}},[t._v(t._s(e))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"学生姓名：",prop:"name"}},[a("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:t.formStu.name,callback:function(e){t.$set(t.formStu,"name",e)},expression:"formStu.name"}},t._l(t.nameData,function(e,r){return a("Option",{key:r,attrs:{value:e}},[t._v(t._s(e))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"身份证号：",prop:"idcard"}},[a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:t.formStu.idcard,callback:function(e){t.$set(t.formStu,"idcard",e)},expression:"formStu.idcard"}})],1),t._v(" "),t._l(t.formDatas,function(e,r){return a("FormItem",{key:r,attrs:{label:e.ermFieldEntity.fieldName+"："}},[1==e.ermFieldEntity.type?a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.ermFieldEntity.value,callback:function(a){t.$set(e.ermFieldEntity,"value",a)},expression:"item.ermFieldEntity.value"}}):t._e(),t._v(" "),2==e.ermFieldEntity.type?a("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.ermFieldEntity.value,callback:function(a){t.$set(e.ermFieldEntity,"value",a)},expression:"item.ermFieldEntity.value"}}):t._e(),t._v(" "),3==e.ermFieldEntity.type?a("Select",{staticStyle:{width:"70%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.ermFieldEntity.value,callback:function(a){t.$set(e.ermFieldEntity,"value",a)},expression:"item.ermFieldEntity.value"}},t._l(e.ermFieldEntity.fieldVal,function(e){return a("Option",{key:e.id,attrs:{value:e.valKey}},[t._v(t._s(e.valVal))])})):t._e(),t._v(" "),4==e.ermFieldEntity.type?a("Select",{staticStyle:{width:"70%"},attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.ermFieldEntity.value,callback:function(a){t.$set(e.ermFieldEntity,"value",a)},expression:"item.ermFieldEntity.value"}},t._l(e.ermFieldEntity.fieldVal,function(e){return a("Option",{key:e.id,attrs:{value:e.valKey}},[t._v(t._s(e.valVal))])})):t._e()],1)}),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.submit("formStu")}}},[t._v("提交信息")])],1)],2)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},619:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"con"},[a("Family")],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},9:function(t,e){t.exports=Vue}},[300]);