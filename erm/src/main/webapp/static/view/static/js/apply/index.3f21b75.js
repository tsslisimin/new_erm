webpackJsonp([5],{144:function(e,t){},149:function(e,t,r){function a(e){o||r(354)}var o=!1,s=r(0)(r(175),r(579),a,"data-v-51020110",null);s.options.__file="/Users/legend/IdeaProjects/erm/前端/erm-ui/src/js/conf/apply/app.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] app.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(429),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={name:"app",data:function(){return{}},components:{mBody:o.default},methods:{},mounted:function(){}}},176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=r(2),i=r(53);t.default={name:"family",data:function(){return{formStu:{name:"",gender:"",birthDay:"",nation:"",stuno:"",grade:"",clazz:"",idcard:"",address:"",isArchives:"",archiveName:"",archiveIdcard:"",father:"",fatherAblity:"",fatherAge:"",fatherJob:"",mother:"",motherAblity:"",motherAge:"",motherJob:"",familyIncome:"",applyReason:"",evidenceUrls:[],archiveRelation:"",archiveAcount:"",supportName:"",supportBankCard:"",helper:"",helperWorkPlace:"",helperPosition:"",helperTel:""},ruleStu:{name:[{required:!0,message:"请选择姓名",trigger:"change"}],idcard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",min:18,message:"身份证号长度不能小于18位",trigger:"blur"}]},isRead:!1,schId:"",gradeData:[],clazzData:[],nameData:[]}},components:{},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=new Date(t.formStu.birthDay),a={name:t.formStu.name,gender:t.formStu.gender,birthDay:t.formStu.birthDay?r.getFullYear()+"-"+(r.getMonth()+1):"",nation:t.formStu.nation,stuno:t.formStu.stuno,grade:t.formStu.grade,clazz:t.formStu.clazz,idcard:t.formStu.idcard,address:t.formStu.address,isArchives:t.formStu.isArchives,archiveName:t.formStu.archiveName,archiveIdcard:t.formStu.archiveIdcard,father:t.formStu.father,fatherAblity:t.formStu.fatherAblity,fatherAge:t.formStu.fatherAge,fatherJob:t.formStu.fatherJob,mother:t.formStu.mother,motherAblity:t.formStu.motherAblity,motherAge:t.formStu.motherAge,motherJob:t.formStu.motherJob,familyIncome:t.formStu.familyIncome,applyReason:t.formStu.applyReason,evidenceUrls:t.formStu.evidenceUrls.join(),archiveRelation:t.formStu.archiveRelation,archiveAcount:t.formStu.archiveAcount,supportName:t.formStu.supportName,supportBankCard:t.formStu.supportBankCard,helper:t.formStu.helper,helperWorkPlace:t.formStu.helperWorkPlace,helperPosition:t.formStu.helperPosition,helperTel:t.formStu.helperTel};if(!t.isRead)return void t.$Message.error("请先承诺条款！");if(1==t.formStu.isArchives){if(!t.formStu.archiveName)return void t.$Message.error("请输入建档立卡人姓名！");if(!t.formStu.archiveIdcard)return void t.$Message.error("请输入建档立卡人姓名身份证号！")}s.default.post(l.api.h5.saveApply,a,function(e){t.$Message.success("申请表提交成功！")},function(e){t.$Message.error("提交失败！")},function(e){t.$Message.error("提交失败！")})}else t.$Message.error("表单验证失败！")})},rules:function(){this.$Modal.info({title:"承诺条款",content:"<p>1：为了落实国家资助政策，不影响您的孩子及时得到国家资助，请您按照您家庭实际情况如实填写您的家庭经济信息，您所填写的信息仅用于学校和教育主管部门在学生资助工作中参考，会高度保密，请您放心！</p><p>2：同时，我们也提醒您，在填写本信息过程中务必实事求是，确保信息准确，如因信息不实造成有关后果将由您和您的家庭自行承担。</p><p>3：如您的家庭经济情况确实较好，不属于经济困难家庭，也可以不填写此信息。</p>"})},getFile:function(){var e=this,t=document.getElementById("files");this.fileData=new FormData,this.fileData.append("file",t.files[0]),s.default.post(l.api.file.uploadFileWithoutLogin,this.fileData,function(t){e.fileData=null,e.formStu.evidenceUrls.push(t.data),e.$Message.success("该图片上传成功！")},function(t){e.$Message.error("文件上传出错！")},function(t){e.$Message.error("文件上传出错！")})},getGrade:function(){var e=this;s.default.get(l.api.student.studentsByParam,{schoolId:this.schId},function(t){var r=t.data,o=[];r.grades.forEach(function(e){e.grade&&o.push(e.grade)}),e.gradeData=(0,a.uniq)(o)})},getClazz:function(){var e=this;this.nameData=[],this.formStu.name="",this.clazzData=[],this.formStu.clazz="",this.formStu.idcard="",s.default.get(l.api.student.studentsByParam,{schoolId:this.schId,grade:this.formStu.grade},function(t){var r=t.data,o=[];r.grades.forEach(function(e){e.clazz&&o.push(e.clazz)}),e.clazzData=(0,a.uniq)(o)})},getName:function(){var e=this;this.nameData=[],this.formStu.name="",this.formStu.idcard="",s.default.get(l.api.student.studentsByParam,{schoolId:this.schId,grade:this.formStu.grade,clazz:this.formStu.clazz},function(t){var r=t.data,o=[];r.grades.forEach(function(e){e.name&&o.push(e.name)}),e.nameData=(0,a.uniq)(o)})},getCard:function(){var e=this;s.default.get(l.api.student.queryStudentsBySchoolId,{schoolId:this.schId,grade:this.formStu.grade,clazz:this.formStu.clazz,name:this.formStu.name},function(t){var r=t.data;e.formStu.idcard=r.grades[0].idcard,e.formStu.stuno=r.grades[0].stuno,e.formStu.gender=r.grades[0].gender,e.formStu.address=r.grades[0].address,e.formStu.birthDay=r.grades[0].birth,e.formStu.nation=r.grades[0].nation,e.formStu.birthDay=r.grades[0].birth,e.formStu.archiveRelation=r.grades[0].archiveRelation,e.formStu.archiveAcount=r.grades[0].archiveAcount,e.formStu.supportName=r.grades[0].supportName,e.formStu.supportBankCard=r.grades[0].supportBankCard,e.formStu.helper=r.grades[0].helper,e.formStu.helperWorkPlace=r.grades[0].helperWorkPlace,e.formStu.helperPosition=r.grades[0].helperPosition,e.formStu.helperTel=r.grades[0].helperTel,e.formStu.isArchives=r.grades[0].isArchives,e.formStu.archiveName=r.grades[0].archiveName,e.formStu.archiveIdcard=r.grades[0].archiveIdcard,e.formStu.father=r.family.father,e.formStu.fatherAblity=r.family.fatherAblity,e.formStu.fatherAge=r.family.fatherAge,e.formStu.fatherJob=r.family.fatherJob,e.formStu.mother=r.family.mother,e.formStu.motherAblity=r.family.motherAblity,e.formStu.motherAge=r.family.motherAge,e.formStu.motherJob=r.family.motherJob,e.formStu.familyIncome=r.family.familyIncome,e.formStu.applyReason=r.family.applyReason,e.formStu.evidenceUrls=r.family.evidenceUrls.join(),console.log(e.formStu)})}},watch:{"formStu.grade":function(e){e&&this.getClazz()},"formStu.clazz":function(e){e&&this.getName()},"formStu.name":function(e){e&&this.getCard()}},mounted:function(){this.schId=i.URL.getVal("schId"),this.getGrade()}}},296:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=r(9),s=a(o),l=r(149),i=a(l);r(144),new s.default({el:"#app",render:function(e){return e(i.default)},mounted:function(){console.log("success")}})},323:function(e,t){},354:function(e,t){},4:function(e,t){e.exports=_},429:function(e,t,r){function a(e){o||r(323)}var o=!1,s=r(0)(r(176),r(548),a,"data-v-1c81cd7a",null);s.options.__file="/Users/legend/IdeaProjects/erm/前端/erm-ui/src/js/conf/apply/body.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] body.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},5:function(e,t){e.exports=$},53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={getVal:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(t);return r?decodeURIComponent(r[2]):null}};t.URL=a},548:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"apply"},[r("Card",{attrs:{padding:10,shadow:!1,"dis-hover":!1,bordered:!1}},[r("h3",[e._v("湖南省 补助申请表")]),e._v(" "),r("Form",{ref:"formStu",attrs:{model:e.formStu,"label-width":150,rules:e.ruleStu}},[r("FormItem",{attrs:{label:"年级：",prop:"grade"}},[r("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:e.formStu.grade,callback:function(t){e.$set(e.formStu,"grade",t)},expression:"formStu.grade"}},e._l(e.gradeData,function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])}))],1),e._v(" "),r("FormItem",{attrs:{label:"班级：",prop:"clazz"}},[r("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:e.formStu.clazz,callback:function(t){e.$set(e.formStu,"clazz",t)},expression:"formStu.clazz"}},e._l(e.clazzData,function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])}))],1),e._v(" "),r("FormItem",{attrs:{label:"学生姓名：",prop:"name"}},[r("Select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择"},model:{value:e.formStu.name,callback:function(t){e.$set(e.formStu,"name",t)},expression:"formStu.name"}},e._l(e.nameData,function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])}))],1),e._v(" "),r("FormItem",{attrs:{label:"身份证号：",prop:"idcard"}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.idcard,callback:function(t){e.$set(e.formStu,"idcard",t)},expression:"formStu.idcard"}})],1),e._v(" "),r("FormItem",{attrs:{label:"性别："}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formStu.gender,expression:"formStu.gender"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.formStu.gender,"1")},on:{change:function(t){e.$set(e.formStu,"gender","1")}}}),e._v("男")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formStu.gender,expression:"formStu.gender"}],attrs:{type:"radio",value:"2"},domProps:{checked:e._q(e.formStu.gender,"2")},on:{change:function(t){e.$set(e.formStu,"gender","2")}}}),e._v("女")])]),e._v(" "),r("FormItem",{attrs:{label:"出生年月："}},[r("DatePicker",{staticStyle:{width:"70%"},attrs:{type:"month",placeholder:"请选择"},model:{value:e.formStu.birthDay,callback:function(t){e.$set(e.formStu,"birthDay",t)},expression:"formStu.birthDay"}})],1),e._v(" "),r("FormItem",{attrs:{label:"民族："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.nation,callback:function(t){e.$set(e.formStu,"nation",t)},expression:"formStu.nation"}})],1),e._v(" "),r("FormItem",{attrs:{label:"学籍号："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.stuno,callback:function(t){e.$set(e.formStu,"stuno",t)},expression:"formStu.stuno"}})],1),e._v(" "),r("FormItem",{attrs:{label:"家庭住址："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.address,callback:function(t){e.$set(e.formStu,"address",t)},expression:"formStu.address"}})],1),e._v(" "),r("FormItem",{attrs:{label:"是否建档立卡户："}},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formStu.isArchives,expression:"formStu.isArchives"}],attrs:{type:"radio",value:"0"},domProps:{checked:e._q(e.formStu.isArchives,"0")},on:{change:function(t){e.$set(e.formStu,"isArchives","0")}}}),e._v("否")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formStu.isArchives,expression:"formStu.isArchives"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.formStu.isArchives,"1")},on:{change:function(t){e.$set(e.formStu,"isArchives","1")}}}),e._v("是")])]),e._v(" "),1==e.formStu.isArchives?r("FormItem",{attrs:{label:"湖南省扶贫补贴明白折（建档立卡）人姓名："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.archiveName,callback:function(t){e.$set(e.formStu,"archiveName",t)},expression:"formStu.archiveName"}})],1):e._e(),e._v(" "),1==e.formStu.isArchives?r("FormItem",{attrs:{label:"湖南省扶贫补贴明白折（建档立卡）人身份证号："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.archiveIdcard,callback:function(t){e.$set(e.formStu,"archiveIdcard",t)},expression:"formStu.archiveIdcard"}})],1):e._e(),e._v(" "),1==e.formStu.isArchives?r("FormItem",{attrs:{label:"湖南省扶贫补贴明白折（建档立卡）人账号："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.archiveAcount,callback:function(t){e.$set(e.formStu,"archiveAcount",t)},expression:"formStu.archiveAcount"}})],1):e._e(),e._v(" "),1==e.formStu.isArchives?r("FormItem",{attrs:{label:"湖南省扶贫补贴明白折（建档立卡）人关系："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.archiveRelation,callback:function(t){e.$set(e.formStu,"archiveRelation",t)},expression:"formStu.archiveRelation"}})],1):e._e(),e._v(" "),0==e.formStu.isArchives?r("FormItem",{attrs:{label:"学生资助卡姓名："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.supportName,callback:function(t){e.$set(e.formStu,"supportName",t)},expression:"formStu.supportName"}})],1):e._e(),e._v(" "),0==e.formStu.isArchives?r("FormItem",{attrs:{label:"学生资助卡银行账号："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.supportBankCard,callback:function(t){e.$set(e.formStu,"supportBankCard",t)},expression:"formStu.supportBankCard"}})],1):e._e(),e._v(" "),r("FormItem",{attrs:{label:"家长/监护人姓名："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.father,callback:function(t){e.$set(e.formStu,"father",t)},expression:"formStu.father"}})],1),e._v(" "),r("FormItem",{attrs:{label:"关系："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.fatherAblity,callback:function(t){e.$set(e.formStu,"fatherAblity",t)},expression:"formStu.fatherAblity"}})],1),e._v(" "),r("FormItem",{attrs:{label:"年龄："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.fatherAge,callback:function(t){e.$set(e.formStu,"fatherAge",t)},expression:"formStu.fatherAge"}})],1),e._v(" "),r("FormItem",{attrs:{label:"工作单位及职业："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.fatherJob,callback:function(t){e.$set(e.formStu,"fatherJob",t)},expression:"formStu.fatherJob"}})],1),e._v(" "),r("FormItem",{attrs:{label:"家长/监护人姓名："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.mother,callback:function(t){e.$set(e.formStu,"mother",t)},expression:"formStu.mother"}})],1),e._v(" "),r("FormItem",{attrs:{label:"关系："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.motherAblity,callback:function(t){e.$set(e.formStu,"motherAblity",t)},expression:"formStu.motherAblity"}})],1),e._v(" "),r("FormItem",{attrs:{label:"年龄："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.motherAge,callback:function(t){e.$set(e.formStu,"motherAge",t)},expression:"formStu.motherAge"}})],1),e._v(" "),r("FormItem",{attrs:{label:"工作单位及职业："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.motherJob,callback:function(t){e.$set(e.formStu,"motherJob",t)},expression:"formStu.motherJob"}})],1),e._v(" "),r("FormItem",{attrs:{label:"家庭经济情况："}},[r("Input",{staticStyle:{width:"70%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"家庭人口、收入及来源等"},model:{value:e.formStu.familyIncome,callback:function(t){e.$set(e.formStu,"familyIncome",t)},expression:"formStu.familyIncome"}})],1),e._v(" "),r("FormItem",{attrs:{label:"申报资助理由："}},[r("Input",{staticStyle:{width:"70%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入"},model:{value:e.formStu.applyReason,callback:function(t){e.$set(e.formStu,"applyReason",t)},expression:"formStu.applyReason"}})],1),e._v(" "),r("FormItem",{attrs:{label:"帮扶人姓名："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.helper,callback:function(t){e.$set(e.formStu,"helper",t)},expression:"formStu.helper"}})],1),e._v(" "),r("FormItem",{attrs:{label:"帮扶人单位："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.helperWorkPlace,callback:function(t){e.$set(e.formStu,"helperWorkPlace",t)},expression:"formStu.helperWorkPlace"}})],1),e._v(" "),r("FormItem",{attrs:{label:"帮扶人职位："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.helperPosition,callback:function(t){e.$set(e.formStu,"helperPosition",t)},expression:"formStu.helperPosition"}})],1),e._v(" "),r("FormItem",{attrs:{label:"帮扶人联系电话："}},[r("Input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入"},model:{value:e.formStu.helperTel,callback:function(t){e.$set(e.formStu,"helperTel",t)},expression:"formStu.helperTel"}})],1),e._v(" "),r("FormItem",{attrs:{label:" "}},[r("Checkbox",{model:{value:e.isRead,callback:function(t){e.isRead=t},expression:"isRead"}}),e._v(" "),r("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.rules()}}},[e._v("已认证阅读并同意承诺条款")])],1),e._v(" "),r("FormItem",{attrs:{label:"上传证明材料照片"}},[r("input",{staticStyle:{"line-height":"20px"},attrs:{type:"file",id:"files",accept:"*",name:"file"},on:{change:function(t){e.getFile()}}}),e._v(" "),r("p",{staticClass:"img-url"},e._l(e.formStu.evidenceUrls,function(e){return r("img",{attrs:{src:"/erm/api/ermFile/img/"+e,alt:""}})}))]),e._v(" "),r("p",{staticStyle:{"margin-bottom":"20px"}},[e._v("注：建档立卡户包括：建档立卡户、农村低保户、农村特困救助供养户或残疾人")]),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submit("formStu")}}},[e._v("提交信息")])],1)],1)],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},579:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"con"},[r("m-body")],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0},9:function(e,t){e.exports=Vue}},[296]);